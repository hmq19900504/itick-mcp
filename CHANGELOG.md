# 更新日志

## [1.2.1] - 2025-12-02

### 🔧 工具描述优化

#### 问题修复
- **修复**: Agent 无法正确区分个股、指数、板块的问题
- **场景**: 用户说"恒科跳水"时，Agent 错误使用个股工具而非指数工具
- **影响**: 提高工具选择准确率，减少查询错误

#### 改进内容
1. **增加适用范围说明**
   - 为所有 9 个工具添加明确的 "⚠️ 重要提示 - 工具适用范围"
   - 明确标注 ✅ 适用于 和 ❌ 不适用于
   - 提供正确的工具指引

2. **添加关键词识别指南**
   - 为 `itick_index_analysis` 添加常见指数关键词列表
   - "恒科"、"恒指"、"上证"、"纳指" 等 → 对应指数代码
   - 帮助 Agent 快速识别用户意图

3. **统一描述格式**
   - 功能简述中明确标注【个股】/【指数】/【板块】
   - 增加关键词识别部分（指数和板块工具）
   - 提供更清晰的示例和使用建议

#### 更新的工具
- `itick_stock_quote` - 明确标注为【个股】工具
- `itick_stock_kline` - 明确标注为【个股】工具
- `itick_stock_tick` - 明确标注为【个股】工具
- `itick_stock_depth` - 明确标注为【个股】工具
- `itick_technical_indicators` - 明确标注为【个股】工具
- `itick_money_flow` - 明确标注为【个股】工具
- `itick_index_analysis` - 添加指数关键词识别指南
- `itick_sector_analysis` - 添加板块关键词识别指南

#### 文档更新
- 新增 `TOOL_DESCRIPTIONS_UPDATE.md` - 工具描述优化说明文档

### 📍 使用提示
⚠️ **用户需要完全重启 Claude Desktop** (Cmd+Q 后重新打开) 才能加载新的工具描述。

---

## [1.2.0] - 2025-11-30

### 🆕 新增功能

#### 指数分析工具 (`itick_index_analysis`)
- 支持大盘指数和板块指数分析
- 多指数对比功能（涨跌幅、成交量、波动率）
- 市场情绪判断（强势/震荡/弱势）
- 支持全球主要指数（A股、港股、美股等）
- 提供投资建议和风险提示

#### 板块分析工具 (`itick_sector_analysis`)
- 行业板块和概念板块强弱分析
- 板块内个股表现排名
- 板块资金流向统计
- 板块龙头股识别
- 板块轮动建议

### 🔧 技术改进
- 扩展工具数量从 7 个增加到 9 个
- 增强了市场整体分析能力
- 从个股分析扩展到指数和板块分析
- 提供更全面的投资决策支持

### 📚 文档更新
- 更新 `README.md` - 添加指数和板块分析工具说明
- 更新 `CHANGELOG.md` - 添加v1.2.0版本记录
- 新增测试文件 `test_index_sector.py`

### ✅ 测试覆盖
- A股三大指数分析测试 ✓
- 多指数对比功能测试 ✓
- 板块分析逻辑验证 ✓

---

## [1.1.0] - 2025-11-30

### 🆕 新增功能

#### 技术指标分析工具 (`itick_technical_indicators`)
- 支持 MACD、RSI、KDJ、BOLL、MA、EMA 等多种技术指标
- 基于K线数据本地计算，无需额外API支持
- 提供金叉/死叉、超买/超卖等专业交易信号
- 支持自定义参数和多指标组合分析

#### 资金流向分析工具 (`itick_money_flow`)
- 分析主力资金、超大单、大单、中单、小单的流入流出
- 计算净流入额和净流入占比
- 提供资金强度判断和操作建议
- 支持自定义分析周期和天数

### 🔧 技术改进
- 扩展了 MCP 工具数量从 5 个增加到 7 个
- 增强了数据分析能力，从基础行情查询升级到专业技术分析
- 优化了工具描述，提供更详细的使用说明和示例

### 📚 文档更新
- 新增 `NEW_FEATURES.md` - 详细的新功能说明文档
- 更新 `README.md` - 添加新工具使用说明
- 创建 `CHANGELOG.md` - 版本更新日志
- 新增测试文件 `test_new_tools.py`

### ✅ 测试覆盖
- 技术指标计算准确性测试 ✓
- 资金流向分析功能测试 ✓
- 多市场支持测试（港股、A股、美股）✓
- MCP 协议兼容性验证 ✓

---

## [1.0.0] - 2025-11-29

### 🎉 首次发布

#### 基础功能
- 实时股票报价查询 (`itick_stock_quote`)
- K线历史数据获取 (`itick_stock_kline`)
- 逐笔成交数据 (`itick_stock_tick`)
- 盘口深度数据 (`itick_stock_depth`)
- 时间戳服务 (`itick_current_timestamp`)

#### 技术特性
- 基于 FastAPI 实现的 MCP 服务器
- 支持 JSON-RPC 2.0 协议
- 多市场覆盖（17+个国家和地区）
- 完整的错误处理和日志系统
- Docker 容器化部署支持

#### 文档
- 完整的 README 文档
- 快速开始指南
- API 使用示例
- Claude Desktop 配置说明

---

## 计划功能

### 未来版本 (2.x)
- [ ] 板块行情分析工具
- [ ] 多股对比工具
- [ ] 技术形态识别
- [ ] 实时预警功能
- [ ] WebSocket 实时推送支持

### 依赖 iTick API 扩展
- [ ] 大宗交易数据（需API支持）
- [ ] 龙虎榜机构席位（需API支持）
- [ ] 融资融券数据（需API支持）
- [ ] 公司财报数据（需API支持）

---

**维护者**: GitHub Copilot  
**仓库**: https://github.com/hmq19900504/itick-mcp  
**许可**: MIT License
