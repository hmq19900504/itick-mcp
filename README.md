# iTick MCP Server

åŸºäº iTick API çš„é‡‘èæ•°æ® MCP æœåŠ¡å™¨ï¼Œä½¿ç”¨ FastAPI å®ç°ï¼Œä¸º Claude ç­‰ AI åŠ©æ‰‹æä¾›å®æ—¶è‚¡ç¥¨è¡Œæƒ…æ•°æ®ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹è‰²

- **å®æ—¶è¡Œæƒ…**ï¼šæ”¯æŒå…¨çƒå¤šå¸‚åœºè‚¡ç¥¨å®æ—¶æŠ¥ä»·ï¼ˆAè‚¡ã€æ¸¯è‚¡ã€ç¾è‚¡ç­‰ï¼‰
- **Kçº¿æ•°æ®**ï¼šè·å–å¤šå‘¨æœŸ Kçº¿æ•°æ®ï¼ˆåˆ†é’Ÿçº¿ã€æ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿ï¼‰
- **Tickæ•°æ®**ï¼šé€ç¬”æˆäº¤æ•°æ®ï¼Œæ¯«ç§’çº§å»¶è¿Ÿ
- **ç›˜å£æ·±åº¦**ï¼šäº”æ¡£/åæ¡£ä¹°å–ç›˜å£æ•°æ®
- **å¤šå¸‚åœºè¦†ç›–**ï¼šæ”¯æŒ17+ä¸ªå›½å®¶å’Œåœ°åŒºçš„è‚¡ç¥¨å¸‚åœº

## ğŸ“‹ æ”¯æŒçš„å¸‚åœº

| å¸‚åœºä»£ç  | å¸‚åœºåç§° | ç¤ºä¾‹ä»£ç  |
|---------|---------|---------|
| HK | é¦™æ¸¯ | 700 (è…¾è®¯) |
| US | ç¾å›½ | AAPL (è‹¹æœ) |
| SH | ä¸Šæµ· | 600519 (èŒ…å°) |
| SZ | æ·±åœ³ | 000001 (å¹³å®‰é“¶è¡Œ) |
| SG | æ–°åŠ å¡ | - |
| JP | æ—¥æœ¬ | - |
| TW | å°æ¹¾ | - |
| IN | å°åº¦ | - |
| TH | æ³°å›½ | - |
| DE | å¾·å›½ | - |
| ... | å…¶ä»– | è§ iTick æ–‡æ¡£ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd itick-mcp
pip install -r requirements.txt
```

### 2. é…ç½® API Key

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ iTick API Keyï¼š

```env
ITICK_API_KEY=your_itick_api_key_here
PORT=3000
```

**å¦‚ä½•è·å– iTick API Key**ï¼š
1. è®¿é—® [iTick å®˜ç½‘](https://itick.org/)
2. ä½¿ç”¨ Google æˆ– GitHub è´¦å·ç™»å½•
3. åœ¨ Dashboard ä¸­è·å– API Key

### 3. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
uvicorn src.server:app --reload --port 3000

# ç”Ÿäº§æ¨¡å¼
uvicorn src.server:app --host 0.0.0.0 --port 3000
```

æœåŠ¡å¯åŠ¨åï¼š
- **MCP ç«¯ç‚¹**: `http://localhost:3000/mcp`
- **å¥åº·æ£€æŸ¥**: `http://localhost:3000/health`
- **API æ–‡æ¡£**: `http://localhost:3000/docs`

### 4. é…ç½® Claude Desktop

ç¼–è¾‘ Claude Desktop é…ç½®æ–‡ä»¶ï¼š

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "itick-stock": {
      "type": "streamableHttp",
      "url": "http://localhost:3000/mcp",
      "timeout": 600,
      "headers": {
        "X-Itick-Token": "your_itick_api_key_here"
      }
    }
  }
}
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### 1. itick_stock_quote - å®æ—¶è‚¡ç¥¨æŠ¥ä»·

è·å–è‚¡ç¥¨å®æ—¶è¡Œæƒ…æ•°æ®ã€‚

**å‚æ•°**ï¼š
- `region` (å¿…å¡«): å¸‚åœºä»£ç ï¼ˆå¦‚ HK, US, SH, SZï¼‰
- `code` (å¿…å¡«): è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ 700, AAPL, 600519ï¼‰

**ç¤ºä¾‹**ï¼š
```
"æŸ¥è¯¢è…¾è®¯æ§è‚¡(00700.HK)çš„å®æ—¶æŠ¥ä»·"
"è·å–è‹¹æœå…¬å¸(AAPL)æœ€æ–°è‚¡ä»·"
```

### 2. itick_stock_kline - Kçº¿æ•°æ®

è·å–è‚¡ç¥¨Kçº¿æ•°æ®ï¼Œæ”¯æŒå¤šå‘¨æœŸã€‚

**å‚æ•°**ï¼š
- `region` (å¿…å¡«): å¸‚åœºä»£ç 
- `code` (å¿…å¡«): è‚¡ç¥¨ä»£ç 
- `start_date` (å¿…å¡«): èµ·å§‹æ—¥æœŸ (YYYYMMDD)
- `end_date` (å¿…å¡«): ç»“æŸæ—¥æœŸ (YYYYMMDD)
- `period` (å¯é€‰): å‘¨æœŸç±»å‹ï¼Œé»˜è®¤ 'day'
  - `1min`, `5min`, `15min`, `30min`, `60min` - åˆ†é’Ÿçº¿
  - `day` - æ—¥çº¿
  - `week` - å‘¨çº¿
  - `month` - æœˆçº¿

**ç¤ºä¾‹**ï¼š
```
"è·å–èŒ…å°(600519.SH)æœ€è¿‘30å¤©çš„æ—¥Kçº¿"
"æŸ¥çœ‹æ¯”äºšè¿ª(002594.SZ) 2024å¹´1æœˆ1æ—¥åˆ°3æœˆ31æ—¥çš„å‘¨Kçº¿"
```

### 3. itick_stock_tick - Tickæ•°æ®

è·å–é€ç¬”æˆäº¤æ•°æ®ã€‚

**å‚æ•°**ï¼š
- `region` (å¿…å¡«): å¸‚åœºä»£ç 
- `code` (å¿…å¡«): è‚¡ç¥¨ä»£ç 

**ç¤ºä¾‹**ï¼š
```
"æŸ¥çœ‹å®å¾·æ—¶ä»£(300750.SZ)çš„å®æ—¶Tickæ•°æ®"
```

### 4. itick_stock_depth - ç›˜å£æ·±åº¦

è·å–äº”æ¡£/åæ¡£ä¹°å–ç›˜æ•°æ®ã€‚

**å‚æ•°**ï¼š
- `region` (å¿…å¡«): å¸‚åœºä»£ç 
- `code` (å¿…å¡«): è‚¡ç¥¨ä»£ç 

**ç¤ºä¾‹**ï¼š
```
"æŸ¥çœ‹é˜¿é‡Œå·´å·´(09988.HK)çš„ç›˜å£æ·±åº¦"
```

### 5. current_timestamp - å½“å‰æ—¶é—´

è·å–å½“å‰ä¸œå…«åŒºæ—¶é—´æˆ³ã€‚

**å‚æ•°**ï¼š
- `format` (å¯é€‰): æ—¶é—´æ ¼å¼
  - `datetime` - å®Œæ•´æ—¥æœŸæ—¶é—´ï¼ˆé»˜è®¤ï¼‰
  - `date` - ä»…æ—¥æœŸ
  - `time` - ä»…æ—¶é—´
  - `timestamp` - Unixæ—¶é—´æˆ³
  - `readable` - å¯è¯»æ ¼å¼

**ç¤ºä¾‹**ï¼š
```
"è·å–å½“å‰æ—¶é—´"
"æŸ¥çœ‹ä»Šå¤©çš„æ—¥æœŸ"
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç»¼åˆåˆ†æç¤ºä¾‹

```
"åˆ†æè…¾è®¯æ§è‚¡(00700.HK)çš„å½“å‰å¸‚åœºè¡¨ç°ï¼ŒåŒ…æ‹¬å®æ—¶æŠ¥ä»·å’Œç›˜å£æ·±åº¦"

"æ¯”è¾ƒèŒ…å°(600519.SH)å’Œäº”ç²®æ¶²(000858.SZ)æœ€è¿‘ä¸€ä¸ªæœˆçš„èµ°åŠ¿"

"æŸ¥çœ‹è‹¹æœå…¬å¸(AAPL)ä»Šå¤©çš„å®æ—¶Tickæ•°æ®å’ŒæŠ¥ä»·ä¿¡æ¯"
```

### æŠ€æœ¯åˆ†æç¤ºä¾‹

```
"è·å–æ¯”äºšè¿ª(002594.SZ)æœ€è¿‘3ä¸ªæœˆçš„æ—¥Kçº¿æ•°æ®ï¼Œåˆ†æè¶‹åŠ¿"

"æŸ¥çœ‹å®å¾·æ—¶ä»£(300750.SZ)çš„5åˆ†é’ŸKçº¿ï¼Œè§‚å¯Ÿç›˜ä¸­æ³¢åŠ¨"
```

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
itick-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ server.py          # FastAPI ä¸»æœåŠ¡å™¨
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ itick_client.py    # iTick API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ tools/             # MCP å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ stock_quote.py
â”‚       â”œâ”€â”€ stock_kline.py
â”‚       â”œâ”€â”€ stock_tick.py
â”‚       â”œâ”€â”€ stock_depth.py
â”‚       â””â”€â”€ timestamp.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â”œâ”€â”€ Dockerfile
â””â”€â”€ README.md
```

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `src/tools/` ä¸‹åˆ›å»ºæ–°æ–‡ä»¶
2. å®šä¹‰å·¥å…·ç±»ï¼Œç»§æ‰¿åŸºæœ¬ç»“æ„ï¼š

```python
from typing import Dict, Any

class YourTool:
    name = "your_tool_name"
    description = "å·¥å…·åŠŸèƒ½æè¿°"
    parameters = {
        "type": "object",
        "properties": {
            "param1": {
                "type": "string",
                "description": "å‚æ•°æè¿°"
            }
        },
        "required": ["param1"]
    }
    
    @staticmethod
    async def run(arguments: Dict[str, Any]) -> Dict[str, Any]:
        # å®ç°é€»è¾‘
        return {
            "content": [{
                "type": "text",
                "text": "è¿”å›å†…å®¹"
            }]
        }
```

3. åœ¨ `server.py` ä¸­æ³¨å†Œå·¥å…·

## ğŸ³ Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t itick-mcp .

# è¿è¡Œå®¹å™¨
docker run -d \
  -p 3000:3000 \
  -e ITICK_API_KEY=your_api_key \
  --name itick-mcp \
  itick-mcp
```

## ğŸ“Š API é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|-------|------|---------|
| E001 | äº§å“ä¸å­˜åœ¨ | æ£€æŸ¥è‚¡ç¥¨ä»£ç æ˜¯å¦æ­£ç¡® |
| E002 | è®¤è¯å¤±è´¥ | æ£€æŸ¥ API Key æ˜¯å¦æœ‰æ•ˆ |
| E003 | è¶…è¿‡è®¢é˜…é™åˆ¶ | è”ç³»å®¢æœå‡çº§å¥—é¤æˆ–å‡å°‘è®¢é˜… |

## ğŸ”— ç›¸å…³é“¾æ¥

- [iTick å®˜ç½‘](https://itick.org/)
- [iTick API æ–‡æ¡£](https://docs.itick.org/)
- [FinanceMCP å‚è€ƒé¡¹ç›®](https://github.com/guangxiangdebizi/FinanceMCP)
- [MCP åè®®è§„èŒƒ](https://modelcontextprotocol.io/)

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¨â€ğŸ’» ä½œè€…

åŸºäº iTick API å’Œ MCP åè®®æ„å»º

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ Starï¼
